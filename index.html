<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Workout Tracker</title>
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#121212">
<script src="https://accounts.google.com/gsi/client" async defer></script>

<style>
  * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Arial', sans-serif; }
  body { background: #f4f4f4; color: #333; }
  .hidden { display: none; }
  .screen { padding: 20px; max-width: 500px; margin: auto; }

  /* Onboarding */
  .wizard-step { text-align: center; padding: 40px 20px; }
  .wizard-step h2 { margin-bottom: 20px; }
  .btn { display: block; width: 100%; padding: 14px; margin: 8px 0; font-size: 16px; border: none; border-radius: 8px; cursor: pointer; }
  .btn-primary { background: #ff6600; color: #fff; }
  .btn-secondary { background: #ddd; }
  .progress { margin-top: 15px; font-size: 14px; color: #555; }

  /* Workout Cards */
  .plan-container { display: grid; gap: 16px; }
  .day-card { background: #fff; border-radius: 12px; padding: 16px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
  .day-card h3 { margin-bottom: 10px; }
  .exercise-list p { margin: 4px 0; font-size: 14px; }

  /* Logging */
  .exercise-entry { background: #fff; padding: 12px; margin-bottom: 12px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
  .exercise-entry strong { font-size: 14px; }
  .controls { display: flex; gap: 8px; }
  .control-btn { width: 30px; height: 30px; border-radius: 50%; border: none; background: #ff6600; color: #fff; font-size: 18px; cursor: pointer; }

  /* Bottom Navigation */
  .bottom-nav { position: fixed; bottom: 0; width: 100%; background: #fff; display: flex; justify-content: space-around; padding: 10px 0; box-shadow: 0 -2px 6px rgba(0,0,0,0.1); }
  .nav-item { text-align: center; font-size: 12px; color: #666; }
  .nav-item.active { color: #ff6600; }
</style>
</head>
<body>

<!-- Onboarding Wizard -->
<div id="onboarding" class="screen">
  <div id="step1" class="wizard-step">
    <h2>What's your goal?</h2>
    <button class="btn btn-primary" onclick="nextStep('goal','Hypertrophy')">Hypertrophy</button>
    <button class="btn btn-primary" onclick="nextStep('goal','Strength')">Strength</button>
    <div class="progress">Step 1 of 5</div>
  </div>

  <div id="step2" class="wizard-step hidden">
    <h2>Your experience level?</h2>
    <button class="btn btn-primary" onclick="nextStep('experience','Beginner')">Beginner</button>
    <button class="btn btn-primary" onclick="nextStep('experience','Intermediate')">Intermediate</button>
    <button class="btn btn-primary" onclick="nextStep('experience','Advanced')">Advanced</button>
    <div class="progress">Step 2 of 5</div>
  </div>

  <div id="step3" class="wizard-step hidden">
    <h2>Where will you train?</h2>
    <button class="btn btn-primary" onclick="nextStep('equipment','Home')">Home</button>
    <button class="btn btn-primary" onclick="nextStep('equipment','Gym')">Gym</button>
    <div class="progress">Step 3 of 5</div>
  </div>

  <div id="step4" class="wizard-step hidden">
    <h2>How many days/week?</h2>
    <button class="btn btn-primary" onclick="nextStep('days',2)">2</button>
    <button class="btn btn-primary" onclick="nextStep('days',3)">3</button>
    <button class="btn btn-primary" onclick="nextStep('days',4)">4</button>
    <button class="btn btn-primary" onclick="nextStep('days',5)">5</button>
    <div class="progress">Step 4 of 5</div>
  </div>

  <div id="step5" class="wizard-step hidden">
    <h2>Include Cardio?</h2>
    <button class="btn btn-primary" onclick="nextStep('cardio',true)">Yes</button>
    <button class="btn btn-primary" onclick="nextStep('cardio',false)">No</button>
    <div class="progress">Step 5 of 5</div>
    <div style="margin-top:20px;">
      <div id="signin-btn" class="g_id_signin"
        data-type="standard"
        data-size="large"
        data-theme="outline"
        data-client_id="YOUR_GOOGLE_CLIENT_ID"
        data-callback="handleCredentialResponse">
      </div>
    </div>
  </div>
</div>

<!-- Workout Plan Screen -->
<div id="plan-screen" class="screen hidden">
  <h2>Your Workout Plan</h2>
  <div class="plan-container" id="workoutPlan"></div>
</div>

<!-- Logging Screen -->
<div id="logging-screen" class="screen hidden">
  <h2>Today's Workout</h2>
  <div id="loggingForm"></div>
  <button class="btn btn-primary" onclick="saveWorkout()">Save Workout</button>
  <p id="logStatus"></p>
</div>

<!-- Bottom Navigation -->
<div class="bottom-nav hidden" id="bottomNav">
  <div class="nav-item active" onclick="showScreen('plan-screen')">üèãÔ∏è<br>Plan</div>
  <div class="nav-item" onclick="showScreen('logging-screen')">üìù<br>Log</div>
  <div class="nav-item" onclick="showHistory()">üìÖ<br>History</div>
  <div class="nav-item" onclick="showSettings()">‚öôÔ∏è<br>Settings</div>
</div>

<script>
let step = 1;
let userPreferences = {};

function nextStep(key, value) {
  userPreferences[key] = value;
  localStorage.setItem('preferences', JSON.stringify(userPreferences));
  document.getElementById(`step${step}`).classList.add('hidden');
  step++;
  if (step <= 5) {
    document.getElementById(`step${step}`).classList.remove('hidden');
  }
}

function handleCredentialResponse(response) {
  // After Google Sign-In, generate plan
  document.getElementById('onboarding').classList.add('hidden');
  generateWorkoutPlan();
  document.getElementById('plan-screen').classList.remove('hidden');
  document.getElementById('bottomNav').classList.remove('hidden');
}

function generateWorkoutPlan() {
  const container = document.getElementById('workoutPlan');
  container.innerHTML = '';
  const { goal, equipment, days } = JSON.parse(localStorage.getItem('preferences'));
  const templates = getWorkoutTemplate(days, equipment, goal);
  
  templates.forEach((dayPlan, i) => {
    let div = document.createElement('div');
    div.className = 'day-card';
    div.innerHTML = `<h3>Day ${i+1}: ${dayPlan.day}</h3><div class="exercise-list"></div>`;
    dayPlan.exercises.forEach(ex => {
      div.innerHTML += `<p>${ex.name} ‚Äî ${ex.sets} sets</p>`;
    });
    container.appendChild(div);
  });
}

function getWorkoutTemplate(days, equipment, goal) {
  // (Same logic as before, omitted here for brevity)
  return [
    { day: "Push", exercises: [{name:"Bench Press", sets:4}, {name:"Overhead Press", sets:3}] },
    { day: "Pull", exercises: [{name:"Deadlift", sets:3}, {name:"Pull-Ups", sets:4}] }
  ];
}

function showScreen(screenId) {
  document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
  document.getElementById(screenId).classList.remove('hidden');
}

// Service Worker registration
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./service-worker.js');
}
</script>
</body>
</html>
